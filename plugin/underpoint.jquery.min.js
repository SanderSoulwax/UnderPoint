(function(b){function g(a,c){this.element=a;this.options=b.extend({},h,c);"string"===typeof this.options.trigger&&(this.options.trigger=[this.options.trigger]);this._defaults=h;this._name=d;this._mousePos={x:0,y:0};this.init()}var d="underpoint",h={trigger:["click"],selector:"*",depth:0,callback:function(){}};g.prototype={init:function(){this.proxied={didTrigger:jQuery.proxy(this._didTrigger,this),mouseMove:jQuery.proxy(this._mouseMoveForManualTrigger,this)};this.publicFunctions={mousePoint:jQuery.proxy(this.elementsUnderMousePoint,
    this),point:jQuery.proxy(this.elementsUnderPoint,this)};for(var a=this.options.trigger.length-1,c;0<=a;a--)if(c=this.options.trigger[a],"manual"!==c)b(this.element).on(c,this.proxied.didTrigger);else b(this.element).on("mousemove",this.proxied.mouseMove)},_mouseMoveForManualTrigger:function(a){this._mousePos={x:a.pageX,y:a.pageY}},_didTrigger:function(a){this.options.callback(this._elementsUnderPoint(a.pageX,a.pageY),a)},_elementsUnderPoint:function(a,c){var f,d,e;return this._findAtDepth(b(this.element),
    this.options.selector,this.options.depth).filter(function(){e=b(this).offset();f=[e.left,e.left+b(this).outerWidth()];d=[e.top,e.top+b(this).outerHeight()];return a>=f[0]&&a<=f[1]&&c>=d[0]&&c<=d[1]})},_findAtDepth:function(a,c,b){var d=[],e;if(0<b){for(e=1;e<=b;e++)d.push("> "+Array(e).join("* > ")+c);c=d.join(", ")}return a.find(c)},elementsUnderMousePoint:function(){return this._elementsUnderPoint(this._mousePos.x,this._mousePos.y)},elementsUnderPoint:function(a){return"undefined"===typeof a||"undefined"===
    typeof a.x||"undefined"===typeof a.y?!1:this._elementsUnderPoint(a.x,a.y)}};b.fn[d]=function(a,c){if("string"===typeof a&&1<=this.length&&b.data(this[0],"plugin_"+d)){var f=b.data(this[0],"plugin_"+d).publicFunctions[a];if("undefined"!==typeof f)return f(c)}else return this.each(function(){b.data(this,"plugin_"+d)||b.data(this,"plugin_"+d,new g(this,a))});return!1}})(jQuery,window,document);